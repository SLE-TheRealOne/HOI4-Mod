# air_experience_usage
air_experience_usage = {

    # call_ace_flight_instructor
	call_ace_flight_instructor {
        custom_cost_trigger {
            has_air_experience > 50
        }
        complete_effect {
            add_ace {
                type = flight_instructor
                is_female = no
            }
            air_experience = -50
        }
        custom_cost_text = call_ace_flight_instructor_cost
        days_re_enable = 360
    }

	# call_ace_flight_coordinator
	call_ace_flight_coordinator {
        custom_cost_trigger {
            has_air_experience > 50
        }
        complete_effect {
            add_ace {
                type = flight_coordinator
                is_female = no
            }
            air_experience = -50
        }
        custom_cost_text = call_ace_flight_coordinator_cost
        days_re_enable = 360
    }

    # call_ace_radar_specialist
    call_ace_radar_specialist {
		custom_cost_trigger {
            has_air_experience > 50
        }
        complete_effect {
            add_ace {
                type = radar_specialist
                is_female = yes
            }
            air_experience = -50
        }
        custom_cost_text = call_ace_radar_specialist_cost
        days_re_enable = 360
    }

	# call_ace_radio_specialist
	call_ace_radio_specialist {
		custom_cost_trigger {
            has_air_experience > 50
        }
        complete_effect {
            add_ace {
                type = ground_support_coordinator
                is_female = yes
            }
            air_experience = -50
        }
        custom_cost_text = call_ace_radio_specialist_cost
        days_re_enable = 360
    }

	# call_ace_technician
	call_ace_technician {
        custom_cost_trigger {
            has_air_experience > 50
        }
        complete_effect {
            add_ace {
                type = technician
                is_female = yes
            }
            air_experience = -50
        }
        custom_cost_text = call_ace_technician_cost
        days_re_enable = 360
    }
}

# political_power_usage
political_power_usage = {

	# add_civilian_factory_to_random_state
	add_civilian_factory_to_random_state {
		cost = 150
		available {
			any_owned_state {
				free_building_slots = {
					building = industrial_complex
					size > 1
					include_locked = no
				}
			}
		}
		complete_effect {
			random_owned_controlled_state {
				limit = {
					free_building_slots = {
						building = industrial_complex
						size > 1
						include_locked = no
					}
				}
				add_building_construction {
					type = industrial_complex
					level = 1
					instant_build = yes
				}
			}
		}
		days_remove = 35
		days_re_enable = 180
	}

	# use_population_war_support_A
	use_population_war_support_A {
	    cost = 40
	    available = {
	        has_war_support > 0.89
	    }
	    modifier = {
	        consumer_goods_factor = -0.05
	        industrial_capacity_factory = 0.10
	        production_speed_buildings_factor = 0.10
	        war_support_weekly = -0.01
	    }
	    days_remove = 60
	}

	# use_population_war_support_B
    use_population_war_support_B {
        cost = 30
        available = {
            has_war_support < 0.90
            has_war_support > 0.85
        }
        modifier = {
            consumer_goods_factor = -0.05
            industrial_capacity_factory = 0.07
            production_speed_buildings_factor = 0.07
            war_support_weekly = -0.004
        }
        days_remove = 60
    }

    # use_population_war_support_C
    use_population_war_support_C {
        cost = 20
        available = {
            has_war_support < 0.85
            has_war_support > 0.79
        }
        modifier = {
            consumer_goods_factor = -0.05
            industrial_capacity_factory = 0.05
            production_speed_buildings_factor = 0.05
            war_support_weekly = -0.002
        }
        days_remove = 60
    }

}

# ground_experience_usage
ground_experience_usage = {

    # supply_units_of_field_marshal
    supply_units_of_field_marshal = {
        days_remove = 10

        available = {
            stockpile_ratio = {
                archetype = convoy
                ratio > required_convoys
            }
            has_manpower > required_manpower
            has_army_experience > 10
            command_power > 3
            any_enemy_country = {
                has_war_with = PREV
                has_capitulated = no
                enemies_strength_ratio > 2.2
            }
        }

        complete_effect = {
            add_equipment_to_stockpile = {
                type = convoy_1
                amount = required_convoys_neg
            }
            add_manpower = required_manpower_neg
            add_command_power = -6

            every_army_leader = {
                limit = {
                    AND = {
                        is_leading_army_group = yes
                        is_field_marshal = yes
                    }
                }
                supply_units = 240
            }
        }

        remove_effect = {
            add_equipment_to_stockpile = {
                type = convoy_1
                amount = required_convoys
            }
            add_manpower = required_manpower
        }
    }

    buff_units = {

        complete_effect = {
            add_command_power = -1

            every_army_leader = {
                limit = {
                    AND = {
                        num_units = 23
                        is_leading_army = yes
                    }
                }
                add_temporary_buff_to_units = {
                    combat_offense = 0.75
                    combat_breakthrough = 0.75
                    org_damage_multiplier = -0.75
                    str_damage_multiplier = -0.75
                    tooltip = tooltip_temp_string
                    days = 10
                }
            }
        }
    }


    # supply_units_of_african_corps
    supply_units_of_african_corps= {
        days_remove = 5
        days_re_enable = 1

        available = {
            stockpile_ratio = {
                archetype = convoy
                ratio > required_convoys
            }
            has_manpower > -10000
            has_army_experience > 10
            command_power > 3
            any_enemy_country = {
                has_war_with = PREV
                has_capitulated = no
                enemies_strength_ratio > 2.2
            }
        }

        complete_effect = {
            add_equipment_to_stockpile = {
                type = convoy_1
                amount = required_convoys_neg
            }
            add_manpower = -10000
            add_command_power = -3

            every_army_leader = {
                limit = {
                    AND = {
                        num_units = 24
                        #attack_skill_level > 3
                        #defense_skill_level > 2
                        #logistics_skill_level > 1
                        #planning_skill_level > 3
                        #skill > 3
                        has_trait = panzer_leader
                        has_trait = career_officer
                        has_trait = infantry_officer
                        #is_assigned = yes
                        is_leading_army = yes
                    }
                }
                supply_units = 120
            }
        }

        remove_effect = {
            add_equipment_to_stockpile = {
                type = convoy_1
                amount = required_convoys
            }
            add_manpower = 9000
        }
    }

    # supply_units_of_island_corps
    supply_units_of_island_corps= {
        days_remove = 5
        days_re_enable = 1

        available = {
            stockpile_ratio = {
                archetype = convoy
                ratio > required_convoys
            }
            has_manpower > -10000
            has_army_experience > 10
            command_power > 3
            any_enemy_country = {
                has_war_with = PREV
                has_capitulated = no
                enemies_strength_ratio > 2.2
            }
        }

        complete_effect = {
            add_equipment_to_stockpile = {
                type = convoy_1
                amount = required_convoys_neg
            }
            add_manpower = -100000
            add_command_power = -30

            every_army_leader = {
                limit = {
                    AND = {
                        num_units = 17
                        is_leading_army = yes
                    }
                }
                supply_units = 1200
            }
        }

        remove_effect = {
            add_equipment_to_stockpile = {
                type = convoy_1
                amount = required_convoys
            }
            add_manpower = 90000
        }
    }

    # reduce_experience_loss_factor
    reduce_experience_loss_factor = {
        available = {
            command_power > 20
        }
        custom_cost_trigger {
            has_army_experience > 20
        }
        modifier = {
            experience_loss_factor = -0.10
        }
        complete_effect = {
            army_experience = -20
            add_command_power = -10
        }
        custom_cost_text = reduce_experience_loss_factor_cost
        days_remove = 30
        days_re_enable = 60
    }

    # increase_max_command_power_daily_gain
    increase_max_command_power_daily_gain = {
        available = {
            command_power < 70
        }
        custom_cost_trigger {
            has_army_experience > 49
        }
        modifier = {
            command_power_gain_mult = 0.15
        }
        complete_effect = {
            army_experience = -50
        }
        custom_cost_text = increase_max_command_power_daily_gain_cost
        days_remove = 60
        days_re_enable = 60
    }

    # gather_ideas_infantry
    gather_ideas_infantry = {
        available = {
            command_power > 19
        }
        custom_cost_trigger {
            has_army_experience > 39
        }
        fixed_random_seed = no
        complete_effect = {
            add_command_power = -5
            army_experience = -40
            random_list = {
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = infantry_weapons
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = infantry_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = engineers_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = recon_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = mountaineers_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = military_police_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = hospital_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = logistics_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = signal_company_tech
                    }
                }
                10 = {
                    add_tech_bonus = {
                        name = gather_ideas_infantry
                        bonus = 0.5
                        uses = 1
                        category = maintenance_company_tech
                    }
                }
            }
        }
        custom_cost_text = gather_ideas_infantry_cost
        days_re_enable = 180
    }

}

# manpower_usage
manpower_usage = {

    # resources_production_boost
    resources_production_boost = {
        custom_cost_trigger {
            command_power > required_command_power
            has_manpower > required_manpower
        }
        modifier = {
            local_resources_factor = 0.10
        }
        complete_effect = {
            add_manpower = required_manpower_neg
            add_command_power = required_command_power_neg
        }
        remove_effect = {
            add_manpower = returned_manpower_80
        }
        custom_cost_text = resources_production_boost_cost
        days_remove = 120
    }

    # naval_shipyards_boost
    naval_shipyards_boost = {
        custom_cost_trigger {
            command_power > required_command_power
            has_manpower > required_manpower
        }
        modifier = {
            industrial_capacity_dockyard = 0.10
        }
        complete_effect = {
            add_manpower = required_manpower_neg
            add_command_power = required_command_power_neg
        }
        remove_effect = {
            add_manpower = returned_manpower_80
        }
        custom_cost_text = naval_shipyards_boost_cost
        days_remove = 120
    }

    # civil_factories_boost
    civil_factories_boost {
        custom_cost_trigger {
            command_power > required_command_power
            has_manpower > required_manpower
        }
        modifier = {
            production_speed_buildings_factor = 0.10
        }
        complete_effect = {
            add_manpower = required_manpower_neg
            add_command_power = required_command_power_neg
        }
        remove_effect = {
            add_manpower = returned_manpower_80
        }
        custom_cost_text = civil_factories_boost_cost
        days_remove = 120
    }

    # military_factories_boost
    military_factories_boost {
        custom_cost_trigger {
            command_power > required_command_power
            has_manpower > required_manpower
        }
        modifier = {
            industrial_capacity_factory = 0.10
        }
        complete_effect = {
            add_manpower = required_manpower_neg
            add_command_power = required_command_power_neg
        }
        remove_effect = {
            add_manpower = returned_manpower_80
        }
        custom_cost_text = military_factories_boost_cost
        days_remove = 120
    }

    # stability_increase
    stability_increase {
        custom_cost_trigger {
            command_power > required_command_power
            has_manpower > required_manpower
        }
        modifier = {
            stability_weekly = 0.002
            war_support_weekly = -0.002
        }
        complete_effect = {
            add_manpower = required_manpower_neg
            add_command_power = required_command_power_neg
        }
        remove_effect = {
            add_manpower = returned_manpower_65
        }
        custom_cost_text = stability_increase_cost
        days_remove = 120
    }

}

# war_measures
war_measures = {

    # increase_troops_attack
    increase_troops_attack = {
        available = {
            has_war = yes
            command_power > required_command_power
        }
        modifier = {
            command_power_gain = -0.5
            army_attack_factor = 0.10
        }
        days_remove = 30
    }

    # increase_troops_defence
    increase_troops_defence = {
        available = {
            has_war = yes
            command_power > required_command_power
        }
        modifier = {
            command_power_gain = -0.5
            army_defence_factor = 0.10
        }
        days_remove = 30
    }

    # encrease_encryption
    increase_encryption = {
        available = {
            has_war = yes
            command_power > required_command_power
        }
        modifier = {
            command_power_gain = -0.5
            encryption_factor = 0.10
        }
        days_remove = 30
    }

    # increase_decryption
    increase_decryption = {
        available = {
            has_war = yes
            command_power > required_command_power
        }
        modifier = {
            command_power_gain = -0.5
            decryption_factor = 0.10
        }
        days_remove = 30
    }

}

# prospect_for_resources
prospect_for_resources = {

    # add_oil_to_random_state_1
	add_oil_to_random_state_1 {
		cost = 10
		icon = oil
		visible = {
		    has_tech = excavation1
		    NOT = {
                has_tech = excavation2
                has_tech = excavation3
                has_tech = excavation4
                has_tech = excavation5
            }
		}
		available {
			AND {
				has_stability > 0.3
				num_of_civilian_factories_available_for_projects > 1
				has_tech = excavation1
				any_owned_state {
					AND = {
						has_resources_amount = {
							resource = oil
							amount > 0
							state = THIS
						}
						has_resources_amount = {
                            resource = oil
                            amount < 10
                            state = THIS
                        }
					}
				}
			}
		}
		modifier = {
            civilian_factory_use = 1
        }
		remove_effect = {
			random_owned_controlled_state {
				limit = {
					has_resources_amount = {
						resource = oil
						amount < 10
						state = THIS
					}
					has_resources_amount = {
                        resource = oil
                        amount > 0
                        state = THIS
                    }
				}
				add_resource {
					type = oil
					amount = 1
					state = THIS
				}
			}
		}
		days_remove = 30
		fire_only_once = yes
	}

	# add_oil_to_random_state_2
    add_oil_to_random_state_2 {
        cost = 20
        icon = oil
        visible = {
            has_tech = excavation2
            NOT = {
                has_tech = excavation3
                has_tech = excavation4
                has_tech = excavation5
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 2
                has_tech = excavation2
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = oil
                            amount > 0
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = oil
                            amount < 20
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 2
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = oil
                        amount < 20
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = oil
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = oil
                    amount = 2
                    state = THIS
                }
            }
        }
        days_remove = 60
        fire_only_once = yes
    }

    # add_oil_to_random_state_3
    add_oil_to_random_state_3 {
        cost = 30
        icon = oil
        visible = {
            has_tech = excavation3
            NOT = {
               has_tech = excavation4
               has_tech = excavation5
           }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 3
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = oil
                            amount > 0
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = oil
                            amount < 30
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 3
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = oil
                        amount < 30
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = oil
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = oil
                    amount = 4
                    state = THIS
                }
            }
        }
        days_remove = 60
        fire_only_once = yes
    }

    # add_oil_to_random_state_4
    add_oil_to_random_state_4 {
        cost = 40
        icon = oil
        visible = {
            has_tech = excavation4
            NOT = {
                has_tech = excavation5
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 4
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = oil
                            amount > 0
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = oil
                            amount < 40
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 4
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = oil
                        amount < 40
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = oil
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = oil
                    amount = 6
                    state = THIS
                }
            }
        }
        days_remove = 90
        fire_only_once = yes
    }

    # add_oil_to_random_state_5
    add_oil_to_random_state_5 {
        cost = 40
        icon = oil
        visible = {
            has_tech = excavation5
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 5
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = oil
                            amount > 0
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = oil
                            amount < 50
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 5
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = oil
                        amount < 50
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = oil
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = oil
                    amount = 8
                    state = THIS
                }
            }
        }
        days_remove = 120
        fire_only_once = yes
    }

    # add_aluminium_to_random_state_1
	add_aluminium_to_random_state_1 {
		cost = 10
		icon = aluminium
		visible = {
		    AND = {
		        has_tech = excavation1
                NOT = {
                    OR = {
                        has_tech = excavation2
                        has_tech = excavation3
                        has_tech = excavation4
                        has_tech = excavation5
                    }
                }
            }
		}
		available {
			AND {
				has_stability > 0.3
				num_of_civilian_factories_available_for_projects > 1
				any_owned_state {
					AND = {
						has_resources_amount = {
							resource = aluminium
							amount < 10
							state = THIS
						}
                        has_resources_amount = {
                            resource = aluminium
                            amount > 0
                            state = THIS
                        }
					}
				}
			}
		}
		modifier = {
            civilian_factory_use = 1
        }
		remove_effect = {
			random_owned_controlled_state {
				limit = {
					has_resources_amount = {
						resource = aluminium
						amount < 10
						state = THIS
					}
                    has_resources_amount = {
                        resource = aluminium
                        amount > 0
                        state = THIS
                    }
				}
				add_resource {
					type = aluminium
					amount = 1
					state = THIS
				}
			}
		}
		days_remove = 30
		fire_only_once = yes
	}

    # add_aluminium_to_random_state_2
	add_aluminium_to_random_state_2 {
        cost = 20
        icon = aluminium
        visible = {
            AND = {
                has_tech = excavation2
                NOT = {
                    OR = {
                        has_tech = excavation3
                        has_tech = excavation4
                        has_tech = excavation5
                    }
                }
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 2
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = aluminium
                            amount < 20
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = aluminium
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 2
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = aluminium
                        amount < 20
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = aluminium
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = aluminium
                    amount = 2
                    state = THIS
                }
            }
        }
        days_remove = 60
        fire_only_once = yes
    }

    # add_aluminium_to_random_state_3
	add_aluminium_to_random_state_3 {
        cost = 30
        icon = aluminium
        visible = {
            AND = {
                has_tech = excavation3
                NOT = {
                    OR = {
                        has_tech = excavation4
                        has_tech = excavation5
                    }
                }
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 3
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = aluminium
                            amount < 30
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = aluminium
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 3
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = aluminium
                        amount < 30
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = aluminium
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = aluminium
                    amount = 4
                    state = THIS
                }
            }
        }
        days_remove = 60
        fire_only_once = yes
    }

    # add_aluminium_to_random_state_4
    add_aluminium_to_random_state_4 {
        cost = 40
        icon = aluminium
        visible = {
            AND = {
                has_tech = excavation4
                NOT = {
                    has_tech = excavation5
                }
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 4
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = aluminium
                            amount < 40
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = aluminium
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 4
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = aluminium
                        amount < 40
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = aluminium
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = aluminium
                    amount = 6
                    state = THIS
                }
            }
        }
        days_remove = 90
        fire_only_once = yes
    }

    # add_aluminium_to_random_state_5
    add_aluminium_to_random_state_5 {
        cost = 50
        icon = aluminium
        visible = {
            has_tech = excavation5
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 5
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = aluminium
                            amount < 50
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = aluminium
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 5
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = aluminium
                        amount < 50
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = aluminium
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = aluminium
                    amount = 8
                    state = THIS
                }
            }
        }
        days_remove = 120
        fire_only_once = yes
    }

    # add_rubber_to_random_state_1
	add_rubber_to_random_state_1 {
		cost = 10
		icon = rubber
		visible = {
		    AND = {
		        has_tech = excavation1
                NOT = {
                    OR = {
                        has_tech = excavation2
                        has_tech = excavation3
                        has_tech = excavation4
                        has_tech = excavation5
                    }
                }
            }
		}
		available {
			AND {
				has_stability > 0.3
				num_of_civilian_factories_available_for_projects > 1
				any_owned_state {
					AND = {
						has_resources_amount = {
							resource = rubber
							amount < 0
							state = THIS
						}
						has_resources_amount = {
                            resource = rubber
                            amount > 0
                            state = THIS
                        }
					}
				}
			}
		}
		modifier = {
            civilian_factory_use = 1
        }
		remove_effect = {
			random_owned_controlled_state {
				limit = {
					has_resources_amount = {
						resource = rubber
						amount < 10
						state = THIS
					}
					has_resources_amount = {
                        resource = rubber
                        amount > 0
                        state = THIS
                    }
				}
				add_resource {
					type = rubber
					amount = 1
					state = THIS
				}
			}
		}
		days_remove = 30
		fire_only_once = yes
	}

	# add_rubber_to_random_state_2
    add_rubber_to_random_state_2 {
        cost = 20
        icon = rubber
        visible = {
            AND = {
                has_tech = excavation2
                NOT = {
                    OR = {
                        has_tech = excavation3
                        has_tech = excavation4
                        has_tech = excavation5
                    }
                }
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 2
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = rubber
                            amount < 20
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = rubber
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 2
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = rubber
                        amount < 20
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = rubber
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = rubber
                    amount = 2
                    state = THIS
                }
            }
        }
        days_remove = 60
        fire_only_once = yes
    }

	# add_rubber_to_random_state_3
    add_rubber_to_random_state_3 {
        cost = 30
        icon = rubber
        visible = {
            AND = {
                has_tech = excavation3
                NOT = {
                    OR = {
                        has_tech = excavation4
                        has_tech = excavation5
                    }
                }
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 3
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = rubber
                            amount < 30
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = rubber
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 3
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = rubber
                        amount < 30
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = rubber
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = rubber
                    amount = 4
                    state = THIS
                }
            }
        }
        days_remove = 60
        fire_only_once = yes
    }

    # add_rubber_to_random_state_4
    add_rubber_to_random_state_4 {
        cost = 40
        icon = rubber
        visible = {
            AND = {
                has_tech = excavation4
                NOT = {
                    has_tech = excavation5
                }
            }
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 4
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = rubber
                            amount < 40
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = rubber
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 4
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = rubber
                        amount < 40
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = rubber
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = rubber
                    amount = 6
                    state = THIS
                }
            }
        }
        days_remove = 90
        fire_only_once = yes
    }

    # add_rubber_to_random_state_5
    add_rubber_to_random_state_5 {
        cost = 50
        icon = rubber
        visible = {
            has_tech = excavation5
        }
        available {
            AND {
                has_stability > 0.3

                num_of_civilian_factories_available_for_projects > 5
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = rubber
                            amount < 50
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = rubber
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 5
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = rubber
                        amount < 50
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = rubber
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = rubber
                    amount = 8
                    state = THIS
                }
            }
        }
        days_remove = 180
        fire_only_once = yes
    }

    # add_tungsten_to_random_state_1
	add_tungsten_to_random_state_1 {
		icon = tungsten
		visible = {
		    has_tech = excavation3
		    NOT = {
                has_tech = excavation4
                has_tech = excavation5
            }
		}
		custom_cost_trigger = {
            command_power > 20
        }
		available {
			AND {
				has_stability > 0.4
				num_of_civilian_factories_available_for_projects > 3

				any_owned_state {
					AND = {
						has_resources_amount = {
							resource = tungsten
							amount > 0
							state = THIS
						}
					}
				}
			}
		}
		modifier = {
            civilian_factory_use = 3
        }
        complete_effect {
            add_command_power = -20
        }
		remove_effect = {
			random_owned_controlled_state {
				limit = {
					has_resources_amount = {
						resource = tungsten
						amount > 0
						state = THIS
					}
				}
				add_resource {
					type = tungsten
					amount = 4
					state = THIS
				}
			}
		}
		days_remove = 90
		custom_cost_text = add_tungsten_to_random_state_1_cost
	}

	# add_tungsten_to_random_state_2
    add_tungsten_to_random_state_2 {
        icon = tungsten
        visible = {
            has_tech = excavation4
            NOT = {
                has_tech = excavation5
            }
        }
		custom_cost_trigger = {
            command_power > 25
        }
        available {
            AND {
                has_stability > 0.4
                num_of_civilian_factories_available_for_projects > 4

                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = tungsten
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 4
        }
        complete_effect {
            add_command_power = -25
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = tungsten
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = tungsten
                    amount = 6
                    state = THIS
                }
            }
        }
        days_remove = 120
        custom_cost_text = add_tungsten_to_random_state_2_cost
    }

    # add_tungsten_to_random_state_3
    add_tungsten_to_random_state_3 {
        icon = tungsten
        visible = {
            has_tech = excavation5
        }
        custom_cost_trigger = {
            command_power > 30
        }
        available {
            AND {
                has_stability > 0.4
                num_of_civilian_factories_available_for_projects > 5
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = tungsten
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 5
        }
        complete_effect {
            add_command_power = -30
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = tungsten
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = tungsten
                    amount = 8
                    state = THIS
                }
            }
        }
        days_remove = 180
        custom_cost_text = add_tungsten_to_random_state_3_cost
    }

	# add_steel_to_random_state_1
    add_steel_to_random_state_1 {
        icon = steel
        visible = {
            has_tech = excavation1
            NOT = {
                has_tech = excavation2
                has_tech = excavation3
                has_tech = excavation4
                has_tech = excavation5
            }
        }
        custom_cost_trigger = {
            command_power > 5
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 1
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = steel
                            amount < 10
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = steel
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 1
        }
        complete_effect {
            add_command_power = -5
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = steel
                        amount < 10
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = steel
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = steel
                    amount = 1
                    state = THIS
                }
            }
        }
        days_remove = 30
        custom_cost_text = add_steel_to_random_state_1_cost
    }

    # add_steel_to_random_state_2
    add_steel_to_random_state_2 {
        icon = steel
        visible = {
            has_tech = excavation2
            NOT = {
                has_tech = excavation3
                has_tech = excavation4
                has_tech = excavation5
            }
        }
        custom_cost_trigger = {
            command_power > 10
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 2
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = steel
                            amount < 20
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = steel
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 2
        }
        complete_effect {
            add_command_power = -10
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = steel
                        amount < 20
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = steel
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = steel
                    amount = 2
                    state = THIS
                }
            }
        }
        days_remove = 60
        custom_cost_text = add_steel_to_random_state_2_cost
    }

    # add_steel_to_random_state_3
    add_steel_to_random_state_3 {
        icon = steel
        visible = {
            has_tech = excavation3
            NOT = {
                has_tech = excavation4
                has_tech = excavation5
            }
        }
        custom_cost_trigger = {
            command_power > 15
        }
        available {
            AND {
                has_stability > 0.3

                num_of_civilian_factories_available_for_projects > 3
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = steel
                            amount < 30
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = steel
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 3
        }
        complete_effect {
            add_command_power = -15
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = steel
                        amount < 30
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = steel
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = steel
                    amount = 4
                    state = THIS
                }
            }
        }
        days_remove = 60
        custom_cost_text = add_steel_to_random_state_3_cost
    }

    # add_steel_to_random_state_4
    add_steel_to_random_state_4 {
        icon = steel
        visible = {
            has_tech = excavation4
            NOT = {
                has_tech = excavation5
            }
        }
        custom_cost_trigger = {
            command_power > 20
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 4
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = steel
                            amount < 40
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = steel
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 4
        }
        complete_effect {
            add_command_power = -20
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = steel
                        amount < 40
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = steel
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = steel
                    amount = 4
                    state = THIS
                }
            }
        }
        days_remove = 90
        custom_cost_text = add_steel_to_random_state_4_cost
    }

    # add_steel_to_random_state_5
    add_steel_to_random_state_5 {
        icon = steel
        visible = {
            has_tech = excavation5
        }
        custom_cost_trigger = {
            command_power > 25
        }
        available {
            AND {
                has_stability > 0.3
                num_of_civilian_factories_available_for_projects > 5
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = steel
                            amount < 50
                            state = THIS
                        }
                        has_resources_amount = {
                            resource = steel
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 5
        }
        complete_effect {
            add_command_power = -25
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = steel
                        amount < 50
                        state = THIS
                    }
                    has_resources_amount = {
                        resource = steel
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = steel
                    amount = 8
                    state = THIS
                }
            }
        }
        days_remove = 120
        custom_cost_text = add_steel_to_random_state_5_cost
    }

    # add_chromium_to_random_state_1
	add_chromium_to_random_state_1 {
		icon = chromium
		visible = {
		    has_tech = excavation3
				NOT = {
                    has_tech = excavation4
                    has_tech = excavation5
                }
		}
		custom_cost_trigger = {
            command_power > 20
        }
		available {
			AND {
				has_stability > 0.4

				num_of_civilian_factories_available_for_projects > 3
				any_owned_state {
					AND = {
						has_resources_amount = {
							resource = chromium
							amount > 0
							state = THIS
						}
					}
				}
			}
		}
		modifier = {
            civilian_factory_use = 3
        }
        complete_effect {
            add_command_power = -20
        }
		remove_effect = {
			random_owned_controlled_state {
				limit = {
					has_resources_amount = {
						resource = chromium
						amount > 0
						state = THIS
					}
				}
				add_resource {
					type = chromium
					amount = 4
					state = THIS
				}
			}
		}
		days_remove = 90
		custom_cost_text = add_chromium_to_random_state_1_cost
	}

    # add_chromium_to_random_state_2
	add_chromium_to_random_state_2 {
		icon = chromium
		visible = {
		    has_tech = excavation4
		    NOT = {
                has_tech = excavation5
            }
		}
		custom_cost_trigger = {
            command_power > 25
        }
		available {
			AND {
				has_stability > 0.4

				num_of_civilian_factories_available_for_projects > 4
				any_owned_state {
					AND = {
						has_resources_amount = {
							resource = chromium
							amount > 0
							state = THIS
						}
					}
				}
			}
		}
		modifier = {
            civilian_factory_use = 4
        }
        complete_effect {
            add_command_power = -25
        }
		remove_effect = {
			random_owned_controlled_state {
				limit = {
					has_resources_amount = {
						resource = chromium
						amount > 0
						state = THIS
					}
				}
				add_resource {
					type = chromium
					amount = 6
					state = THIS
				}
			}
		}
		days_remove = 120
		custom_cost_text = add_chromium_to_random_state_2_cost
	}

    # add_chromium_to_random_state_3
    add_chromium_to_random_state_3 {
        icon = chromium
        visible = {
            has_tech = excavation5
        }
		custom_cost_trigger = {
            command_power > 30
        }
        available {
            AND {
                has_stability > 0.4
                num_of_civilian_factories_available_for_projects > 5
                any_owned_state {
                    AND = {
                        has_resources_amount = {
                            resource = chromium
                            amount > 0
                            state = THIS
                        }
                    }
                }
            }
        }
        modifier = {
            civilian_factory_use = 5
        }
        complete_effect {
            add_command_power = -30
        }
        remove_effect = {
            random_owned_controlled_state {
                limit = {
                    has_resources_amount = {
                        resource = chromium
                        amount > 0
                        state = THIS
                    }
                }
                add_resource {
                    type = chromium
                    amount = 8
                    state = THIS
                }
            }
        }
        days_remove = 180
        custom_cost_text = add_chromium_to_random_state_3_cost
    }

	# add_oil_to_island
	add_oil_to_island {
		cost = 100
		icon = oil
		available {
			AND {
				num_of_civilian_factories_available_for_projects > 2
				has_war = yes
				has_war_support > 0.8
				has_stability > 0.5
				any_owned_state {
					is_island_state = yes
					AND = {
						has_resources_amount = {
							resource = oil
							amount < 1
							state = THIS
						}
					}
				}
			}
		}
		modifier = {
            civilian_factory_use = 2
        }
        complete_effect {
            add_command_power = -30
        }
		remove_effect = {
			random_owned_controlled_state {
				limit = {
					AND = {
						has_resources_amount = {
							resource = oil
							amount < 1
							state = THIS
						}
						is_island_state = yes
					}

				}
				add_resource {
					type = oil
					amount = 1
					state = THIS
				}
			}
		}
		days_remove = 30
		days_re_enable = 60
	}

}